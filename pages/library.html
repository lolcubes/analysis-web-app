<!DOCTYPE html>
<html>
    <head>
        <title>Song Database</title>
        <link rel="stylesheet" type="text/css" href="../style-main.css" />
        <link href="https://fonts.googleapis.com/css?family=Nanum+Gothic" rel="stylesheet">
        <link rel="shortcut icon" type="image/png" href="../favicon.png"/>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>

        <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/jquery.dataTables.css">
        <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.19/js/jquery.dataTables.js"></script>
    </head>
    <body>
            <div id="navbarr">
                    <ul id=navbar>
                    <span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
        
                        <a  href="../index.php"><img id="headerbanner" src="../image-assets/headerbanner.png" alt="Header logo" height="50px" width="260" align="middle"></a>
                        <span> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>
                        <!-- <li id="Menu" class="logoimage"><img src="headerbanner.png" alt="Header logo" height="60px" width="313px"></img></li> -->
                        <li id="Menu" class="home"><a href="../index.php">Home</a></li>
                        <li id="Menu" class="about"><a href="about.html">About</a></li>
                        <li id="Menu"><a href="code.html">Code</a></li>
                        <li id="Menu" class="research"><a href="research.html">Our Research</a></li>
                        <li id="Menu" class="library"><a href="library.html">Database</a></li>
                        <li id="Menu"><a href="analysis-tools.html">Analysis Tools</a></li>
                    </ul>
                </div>
                <div id="bumper">
        </div>
        
        <style>
            .library{
                background-color: rgb(153, 153, 153);
        box-shadow: 1px 4px 28px  rgb(0, 0, 0);
        outline: 0;
            }
        </style>
    <center>
        <br>    <br>
        <div class=subheader>
                <h4>To display and download data, specify information and submit.</h4>
        </div>
        <br> 

        <div id="" class="panels">
            <form action=database-process.php method="POST" name="data-form">
                <div id="input-section-database">
                    <span>Time Period:&nbsp;&nbsp;&nbsp;</span>
                    <select name="time-period">
                        <option selected>All</option>
                        <option value='Renaissance'>Renaissance</option>
                        <option value='Baroque'>Baroque</option>
                        <option value='Classical'>Classical</option>
                        <option value='Romantic'>Romantic</option>
                        <option value='20th Century'>20th Century</option>
                </select>
                </div>
                <br>
                <div id="input-section-database-types" class="data-types">
                    <span>Data Types:&nbsp;&nbsp;&nbsp;</span>
                    <br>
                    <br>
                    <br>
                    <div id="buttons">
                            <script>
                                $( '#select-all' ).click( function () {
                                    $( 'input[type="checkbox"]' ).prop('checked', this.checked)
                                })
                            </script>
                                    
                        <div id="check-all">
                            <label class="container">Check All&nbsp;&nbsp;
                                <input type=checkbox class="buttonform" onclick="checkAll('data-form')"  />
                                <span class="checkmark"></span>
                            </label>
                        </div>
                                    
                        <label class=container>One&nbsp;&nbsp;
                                <input type=checkbox name="data-type[]" id="datatypecheck">
                                <span class=checkmark></span>
                        </label>
                            
                        <label class=container>Two&nbsp;&nbsp;
                            <input type=checkbox name="data-type[]" id="datatypecheck">
                            <span class=checkmark></span>
                        </label>    
                        
                        <label class=container>Three&nbsp;&nbsp;
                            <input type=checkbox name="data-type[]" id="datatypecheck">
                            <span class=checkmark></span>
                        </label>
                    
                    </div>
                </div>
                <br>
                <!-- <span>Composer:   </span>
                <select name="composer" >
                    <option selected disabled hidden>All</option>
                </select> -->
                <br>
                <input type="submit" value="Get Data" class="buttonform">
            </form>

            <script>
                function unCheckAll(formname) {
                    var checkboxes = new Array(); 
                    checkboxes = document[formname].getElementsByTagName('input');
                    
                    for (var i=0; i<checkboxes.length; i++)  {
                        if (checkboxes[i].type == 'checkbox')   {
                            checkboxes[i].checked = false;
                        }
                    }

                    document.getElementById("check-all").innerHTML = '<label class="container">Check All&nbsp;&nbsp;<input type=checkbox class="buttonform" onclick="checkAll(\'data-form\')"  /><span class="checkmark"></span>';
                        console.log("test");
                    }


                function checkAll(formname){
                var checkboxes = new Array(); 
                checkboxes = document[formname].getElementsByTagName('input');
                
                for (var i=0; i<checkboxes.length; i++)  {
                    if (checkboxes[i].type == 'checkbox')   {
                        checkboxes[i].checked = true;
                    }
                }

                document.getElementById("check-all").innerHTML = '<label class="container">Check All&nbsp;&nbsp;<input checked=checked type=checkbox class="buttonform" onclick="unCheckAll(\'data-form\')"  /><span class="checkmark"></span>';
                }
            </script>

        </div>
    </center>

        <style>
            #datadisplayform{
                background-color: rgb(230, 230, 230);
                width: 60%;
                padding: 15px;
                border-radius: 20px; 
            }
        </style>

<table id="table_id" class="display">

            <tr>
                <th>Column 1</th>
                <th>Column 2</th>
            </tr>

        <tbody>
            <tr>
                <td>Row 1 Data 1</td>
                <td>Row 1 Data 2</td>
            </tr>
            <tr>
                <td>Row 2 Data 1</td>
                <td>Row 2 Data 2</td>
            </tr>
        </tbody>
    </table>
<!-- 
    <script>
        $(document).ready( function () {
            $('#table_id').DataTable();
        } );
    </script> -->

<button class="buttonform" onclick="exportTableToCSV('data.csv')"><span>Download as CSV</span></button>


<script>
function downloadCSV(csv, filename) {
    var csvFile;
    var downloadLink;

    // CSV file
    csvFile = new Blob([csv], {type: "text/csv"});

    // Download link
    downloadLink = document.createElement("a");

    // File name
    downloadLink.download = filename;

    // Create a link to the file
    downloadLink.href = window.URL.createObjectURL(csvFile);

    // Hide download link
    downloadLink.style.display = "none";

    // Add the link to DOM
    document.body.appendChild(downloadLink);

    // Click download link
    downloadLink.click();
}

function exportTableToCSV(filename) {
    var csv = [];
    var rows = document.querySelectorAll("table tr");
    
    for (var i = 0; i < rows.length; i++) {
        var row = [], cols = rows[i].querySelectorAll("td, th");
        
        for (var j = 0; j < cols.length; j++) 
            row.push(cols[j].innerText);
        
        csv.push(row.join(","));        
    }

    // Download CSV file
    downloadCSV(csv.join("\n"), filename);
}
</script>
    </body>

</html>


