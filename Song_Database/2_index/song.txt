<!DOCTYPE html>
<html>
    <head>
        <title>Toaster</title>
        <link rel="stylesheet" type="text/css" href="styletest.css" />
        <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" >
        <link rel="shortcut icon" type="image/png" href="favicon.png"/>

    </head>
    <body>
        <nav>
            <div class=navbar>
                <ul>
                    <li id="Menu"><a href="#">Home</a></li>
                    <li id="Menu"><a href="pages/index.html">About</a></li>
                    <li id="Menu"><a href="#">Tools</a></li>
                </ul>
            </div>
        </nav> 
        <div id=header>
                <h1>Beats in Bytes</h1>
        </div>
        <div class=subheader>
                <h2>Analysis Tools</h2>
        </div>

        <div id=welcome>
                <p> <br /> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce id pharetra arcu. Nullam sit amet mollis justo, ac egestas nisl. Quisque eu ante erat. Quisque a nulla eget risus semper maximus non vitae ex. Vivamus nisi ex, luctus in faucibus vel, semper non erat. Pellentesque maximus arcu ut cursus suscipit. Suspendisse ut ligula molestie, gravida purus at, mattis quam. Donec ac dignissim eros, eget facilisis dolor. Vestibulum gravida pharetra lectus, eleifend finibus nulla. Fusce eu aliquam nulla, eget pellentesque nisl.
                    <br />
                    <p>Suspendisse potenti. Etiam ullamcorper sit amet velit a sodales. Donec cursus ut nisl ut dictum. Aliquam ut justo tempus nunc facilisis maximus quis vitae tortor. Duis id augue mi. Donec id lectus ut tortor auctor mollis eu at orci. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae;
                </p>
                    <p>In facilisis ut est a malesuada. Sed sed purus ligula. Cras dignissim consequat pretium. Nulla a eros commodo, consectetur tortor quis, pulvinar sem. Integer ac lectus elit. Nulla facilisi. Curabitur laoreet, justo nec malesuada eleifend, risus nisl vestibulum mauris, eget interdum nunc nisi ut ex. </p>
                </p></div>
 
            <div>
                <?php
                    // $output = shell_exec("/Users/svernooy/Desktop/GCRSEF2019/FinalizedScripts/V2_Scripts/Key_Signature.sh /Applications/MAMP/htdocs/WebDev/winter.txt");
                    // echo "<pre>$output</pre>";
                ?>
            </div>

               
        </div>

                <br />
                <hr>
                <br />
        <!-- <div>
            <iframe src='https://simplebooklet.com/embed.php?wpKey=12T9btD0qIB4asbebdAS9R&source=embed' width='100%' height='950' style='width: 1px; min-width: 100%; max-width:1220px; border: 0px; overflow: hidden;' scrolling='no'></iframe>
        </div> -->
                    
        <div id=center>
        <form method="post">
            <label class=test for="input-file">Open Kern File</label><br>
            <input name=file type="file" id="input-file">

  
               <script>
                    document.getElementById('input-file')
                    .addEventListener('change', getFile)
        
                    function getFile(event) {
                        const input = event.target
                    if ('files' in input && input.files.length > 0) {
                        placeFileContent(
                        document.getElementById('content-target'),
                        input.files[0])
                    }
                    }
        
                    function placeFileContent(target, file) {
                        readFileContent(file).then(content => {
                        target.value = content
                    }).catch(error => console.log(error))
                    }
        
                    function readFileContent(file) {
                        const reader = new FileReader()
                    return new Promise((resolve, reject) => {
                        reader.onload = event => resolve(event.target.result)
                        reader.onerror = error => reject(error)
                        reader.readAsText(file)
                    })
                    }
               </script>

            <br/>
            <br/>
            <textarea name="query" id="content-target"></textarea>
            <br>
            <br>

            <hr>
            <h2>Select Analysis Types:</h2>

            <label class="container">Key Signature
            <input type="checkbox" name="keysig" value="checked">
            <span class="checkmark"></span>
            </label>

            <label class="container">Repeated Note Value
            <input type="checkbox" name="repeatednotevalue" value="checked" >
            <span class="checkmark"></span>
            </label>

            <label class="container">Average Note Value
            <input type="checkbox" name="averagenotevalue" value="checked" >
            <span class="checkmark"></span>
            </label>

            <label class="container">Most Used Note Value  
            <input type="checkbox" name="mostusednotevalue" value="checked" >
            <span class="checkmark"></span>
            </label>
           

            <br>
            <hr>
            <br>
            <br>
            <input type="submit" id="submit">
            <label name="submit" class="test" for="submit">Begin Analysis</label>
            </form>    
            <br>
            <br>
            <hr>
                              

            <?php
                // This code echoes 'Data' On button Press
                if ($_SERVER['REQUEST_METHOD'] === 'POST') {

                    if (isset($_POST['btnDelete'])) {
                    } else {
                        echo "<h2>Data:</h2>";
                    }
                }


            ?>

            <?php
                    // This Code finds Key Signature based on input
                if (isset($_POST['keysig'])) {
                    $filechosen = ($_POST["query"]);

                    $output = shell_exec("/Applications/MAMP/htdocs/WebDev/Key_Signature.sh " . escapeshellarg($filechosen));
                    echo "<p style='color:black;'>"."<pre>$output</pre>"."</p>";
                } 
                
            ?>

            <?php
                    // This Code finds Repeated Pitches based on input
                if (isset($_POST['repeatednotevalue'])) {
                    $filechosen = ($_POST["query"]);

                    $file = 'tmp/file.txt';
                    $content = serialize($filechosen);
                    file_put_contents($file, $content);                    
                    // $content = unserialize(file_get_contents($file));

                    $output = shell_exec("/Applications/MAMP/htdocs/WebDev/Repeated_Note_Value.sh tmp/file.txt");
                    echo "<p style='color:black;'>"."<pre>$output</pre>"."</p>";


                } 
                
            ?>

            <?php
                    // This Code finds Repeated Pitches based on input
                if (isset($_POST['averagenotevalue'])) {
                    $output = shell_exec("/Applications/MAMP/htdocs/WebDev/Average_Note_Value.sh tmp/file.txt");
                    echo "<p style='color:black;'>"."<pre>$output</pre>"."</p>";


                } 
                
            ?>

            <?php
                    // This Code finds Repeated Pitches based on input
                if (isset($_POST['mostusednotevalue'])) {
                    $output = shell_exec("/Applications/MAMP/htdocs/WebDev/Most_Used_Note_Value.sh tmp/file.txt");
                    echo "<p style='color:black;'>"."<pre>$output</pre>"."</p>";


                } 
                
            ?>

            <?php
                    // This Code finds Repeated Pitches based on input
                if (isset($_POST['mostusednotevalue'])) {
                    
                    $output = shell_exec("/Applications/MAMP/htdocs/WebDev/deg.sh tmp/file.txt");
                    echo "<p style='color:black;'>"."<pre>$output</pre>"."</p>";


                } 
                
            ?>
    </body>
</html>